<style>
* {
   line-height: 1.8;     
}

#product-desc {
    display: flex;
    margin-left: 5%;
    margin-right: 5%;
    border: 1px solid lightgrey;
}

#product-desc-left {
    flex: 0 1 40%;
    padding: 1.5%;
}

#image-block {
    border: 1px solid lightgrey;
    padding: 3%;
}

#image-block img {
    width: 60%;     
}

#buttons-block {
    display: flex;    
}

#buttons-block button {
    flex: 0 1 50%;
    background-color: #fb641b;
    border: 2px solid white;
    border-radius: 4px;
    color: white;
    width: 125px;
    height: 50px;
    margin: 0.75%;
}

#product-desc-right {
    flex: 0 1 60%;
    padding: 1.5%;
}

#product-desc-right .product-name {
    font-weight: 700;
}

#product-desc-right .product-language {
    color: grey;
}

#product-desc-right .product-price {
    display: flex;
}

.product-price .discount-price {
    font-size: 18px;
    font-weight: bold;
}

.product-price .actual-price {
    margin-left: 1.5%;
    margin-right: 1.5%;
    margin-top: 0.1%;
    color: gray;
}

.product-price .discount {
    margin-top: 0.2%;
    font-size: 16px;
    color: #388e3c;
}

.label-value {
    display: flex;
    margin-top: 3%;
}

.label {
    flex: 0 0 15%;
}

.value {
	flex-grow: 1;
}

.value ul {
    margin: 0;
    padding: 0;
    padding-left: 6%;
}
</style>


<script>
$(function() {
	const params = new URLSearchParams(window.location.search);
	bookId = params.get('bookId');

	var customerId = -1;
    var status = 0;
	var name = "customerId" + "=";
    var ca = document.cookie.split(';');

  	for(var i = 0; i < ca.length; i++) {
    	var c = ca[i];
    	while (c.charAt(0) == ' ') {
      		c = c.substring(1);
    	}
    	if (c.indexOf(name) == 0) {
      		customerId = c.substring(name.length, c.length);
            status = 1;
    	}
  	}

    if(status != 1) {
    	$("#product-desc").hide();
        alert("Please Login!...");
    }

	$.ajax({
		url: '/bin/obs/bookservlet',
		type: 'POST',
        data: {
        	bookId: bookId,
            action: "getbookdata"
        },
		complete: function(xhr, status) {
        	if (status == "success" && xhr.responseText.trim() != "null") {
            	bookData = JSON.parse(xhr.responseText);
                $(".product-name").text(bookData.name);
                $(".product-language").text(bookData.language);
                $(".actual-price").html("<s>₹" + bookData.price + "</s>");
                $(".discount").text(bookData.discount + "% Off");
                $(".discount-price").text("₹" + ((100-bookData.discount)/100)*bookData.price);
                $("#author-value").text(bookData.author);
                $("#language").text("Language : " + bookData.language);
                $("#publisher").text("Publisher : " + bookData.publisher);
                $("#genre").text("Genre : " + bookData.genre);
                $("#isbn").text("ISBN : " + bookData.isbn);
				$("#pages").text("Pages : " + bookData.pageCount);
                $("#description-value").text(bookData.description);
           	}
            else {
            	alert("Error");

            }
		}
	});

    $("#add-to-cart").click(function() {
		$.ajax({
			url: '/bin/obs/bookservlet',
			type: 'POST',
			data: {
				bookId: bookData.id,
                customerId: customerId,
                action: "addtocart"
			},
		 	complete: function(xhr, status) {
            	if (status == "success") {
                	if(xhr.responseText > 0) {
                      	alert("Successfully Added To Cart");
                   	}
               	}
                else {
                	alert("Error");
                    $("#product-desc").hide();
                }
		 	}
		});
	});

    $("#buy-now").click(function() {
		alert("Buy Now");
	});
});
</script>

<div id="product-desc">
    <div id="product-desc-left">
        <div id="image-block">
            <center><img src="/content/dam/aemContentFolder/english/Harry%20Potter.jpg" width="100px"></center>
        </div>
        <div id="buttons-block">
            <button id="add-to-cart">ADD TO CART</button>
            <button id="buy-now">BUY NOW</button>
        </div>
    </div>
    <div id="product-desc-right">
        <div class="product-name">Harry Potter and the Philosopher's Stone</div>
        <div class="product-language">English</div>
        <div class="product-price">
            <div class="discount-price"></div>
            <div class="actual-price"></div>
            <div class="discount"></div>
        </div>
        <div class="label-value">
        	<div class="label" id="author-label">Author</div>
            <div class="value" id="author-value">J.K. Rowling</div>
        </div>
        <div class="label-value">
            <div class="label" id="highlights-label">Highlights</div>
            <div class="value" id="highlights-value">
                <ul>
                    <li id="language"></li>
                    <li id="publisher">Publisher: Bloomsbury Publishing PLC</li>
                    <li id="genre">Genre: Juvenile Fiction</li>
                    <li id="isbn">ISBN: 9781408855652, 9781408855652</li>
                    <li id="pages">Pages: 352</li>
                </ul>
            </div>
            <div class="label" id="services-label">Services</div>
            <div class="value" id="services-value">
                <ul>
                    <li>7 Days Replacement Policy</li>
                    <li>Cash on Delivery available</li>
                </ul>
            </div>
        </div>
        <div class="label-value">
            <div class="label" id="description-label">Description</div>
            <div class="value" id="description-value">
                About the Book
                After bottling up his magical powers for a lifetime, Harry finally feels like a normal kid when he gets accepted to go to Hogwarts. He is the boy who lived: the only person to have ever survived a killing curse inflicted by the evil Lord Voldemort, who launched a brutal takeover of the Wizarding world, only to vanish after failing to kill Harry. The first in the series of Harry Potter books, Harry Potter and the Philosopher's Stone is full of sympathetic characters and wildly imaginative situations. This book sets the stage for many high-stakes adventures to come. 

                About the Author
                The person who created some of the most iconic characters in the history of children’s literature, JK Rowling was a major part of all of our childhoods. A British novelist, philanthropist, film producer, television producer and screenwriter, best known for writing the Harry Potter fantasy series, she has won multiple awards and sold more than 500 million copies. She conceived the idea for the Harry Potter series while on a delayed train from Manchester to London in 1990. Rowling went from living on state benefits to being the world's first billionaire author. She lost her billionaire status after giving away much of her earnings to charity but she still remains one of the wealthiest people in the world.
            </div>
        </div>
    </div>
</div>